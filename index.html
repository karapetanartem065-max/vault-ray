<nav class="nav">
        <div class="nav-item active" onclick="toggleShop(false)">๐ฆ ะกัะตัะฐ</div>
        <div class="nav-item" onclick="toggleShop(true)">๐๏ธ ะะฐัะบะตั</div>
        <div class="nav-item">๐ ะะธัะถะฐ</div>
    </nav>

    <script>
        let balance = parseInt(localStorage.getItem('v_b')) || 0;
        let energy = 1000;
        let power = parseInt(localStorage.getItem('v_p')) || 1;

        function refresh() {
            document.getElementById('score').innerText = balance.toLocaleString('ru-RU');
            document.getElementById('e-val').innerText = energy + "/1000";
            document.getElementById('fill').style.width = (energy / 10) + '%';
        }

        // ะกะฐะผัะน ะฝะฐะดะตะถะฝัะน ะผะตัะพะด ะบะปะธะบะฐ ะดะปั ัะผะฐัััะพะฝะพะฒ
        const btn = document.getElementById('tapper');
        btn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (energy >= power) {
                balance += power;
                energy -= power;
                refresh();
                localStorage.setItem('v_b', balance);
                if(navigator.vibrate) navigator.vibrate(15);
            }
        });

        function toggleShop(show) {
            document.getElementById('shop').classList.toggle('open', show);
        }

        function closeShop(e) { toggleShop(false); }

        function doUpgrade() {
            if (balance >= 1000) {
                balance -= 1000; power += 1;
                localStorage.setItem('v_b', balance);
                localStorage.setItem('v_p', power);
                refresh();
                alert('ะฃัะปัะณะฐ ะฟะพะดะบะปััะตะฝะฐ!');
            }
        }

        setInterval(() => { if(energy < 1000) { energy += 2; refresh(); } }, 1000);
        refresh();
    </script>
</body>
</html>

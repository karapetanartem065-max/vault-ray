<div class="main">
        <div id="tapper" class="click-area">
            <svg viewBox="0 0 100 100" class="emerald-svg">
                <path d="M50 5 L85 30 L85 70 L50 95 L15 70 L15 30 Z" fill="#21a038" stroke="#2ecc71" stroke-width="2""")/>>
                <path d="M50 5 L50 95 M15 30 L85 30 M15 70 L85 70 M50 5 L15 30 M50 5 L85 30 M50 95 L15 70 M50 95 L85 70" stroke="rgba(255,255,255,0.2)" stroke-width="0.5""")/>>
            </svg>
        </div>

        <div class="limit-card">
            <div class="limit-header">
                <span>–î–æ—Å—Ç—É–ø–Ω—ã–π –ª–∏–º–∏—Ç</span>
                <span id="e-text">1000/1000</span>
            </div>
            <div class="bar-bg"><div id="fill"></div></div>
        </div>
    </div>

    <!-- –ú–ê–†–ö–ï–¢ -->
    <div id="shop" class="sheet">
        <div class="sheet-box">
            <div class="handle" onclick="toggle('shop', false)"></div>
            <h2 style="margin: 0 0 25px 0">–ü–ª–∞—Ç–µ–∂–∏ –∏ —É—Å–ª—É–≥–∏</h2>
            <div class="list-item">
                <div><b>–ú—É–ª—å—Ç–∏-–∫–ª–∏–∫</b><br><small style="color:var(--gray)">+1 –∫ –∫–∞–∂–¥–æ–º—É —Ç–∞–ø—É</small></div>
                <button class="buy-btn" onclick="upgrade()">1,000 ‚ÇΩ</button>
            </div>
        </div>
    </div>

    <!-- –ò–ù–í–ï–°–¢–ò–¶–ò–ò (–ü—Ä–∞–≤–∞—è –∫–Ω–æ–ø–∫–∞) -->
    <div id="invest" class="sheet">
        <div class="sheet-box">
            <div class="handle" onclick="toggle('invest', false)"></div>
            <h2 style="margin: 0 0 25px 0">–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</h2>
            <div class="list-item">
                <div><b>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞</b><br><small style="color:var(--gray)">+5,000 ‚ÇΩ –Ω–∞ —Å—á–µ—Ç</small></div>
                <button class="buy-btn" onclick="alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!')">SHARE</button>
            </div>
        </div>
    </div>

    <nav class="nav">
        <div class="nav-item active" id="btn-home" onclick="toggleAll(false)">
            <span class="icon">üè¶</span>–ì–ª–∞–≤–Ω—ã–π
        </div>
        <div class="nav-item" onclick="toggle('shop', true)">
            <span class="icon">üõçÔ∏è</span>–ü–ª–∞—Ç–µ–∂–∏
        </div>
        <div class="nav-item" onclick="toggle('invest', true)">
            <span class="icon">üìä</span>–ò–Ω–≤–µ—Å—Ç
        </div>
    </nav>

    <script>
        let bal = parseInt(localStorage.getItem('v_bal')) || 0;
        let pwr = parseInt(localStorage.getItem('v_pwr')) || 1;
        let nrg = 1000;

        function sync() {
            document.getElementById('score').innerText = bal.toLocaleString('ru-RU');
            document.getElementById('e-text').innerText = nrg + '/1000';
            document.getElementById('fill').style.width = (nrg / 10) + '%';
        }

        const tapper = document.getElementById('tapper');
        tapper.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (nrg >= pwr) {
                bal += pwr; nrg -= pwr;
                sync();
                localStorage.setItem('v_bal', bal);
                
                // –≠—Ñ—Ñ–µ–∫—Ç—ã
                tapper.style.transform = "scale(0.9)";
                setTimeout(() => tapper.style.transform = "scale(1)", 80);
                createParticle(e.touches[0].clientX, e.touches[0].clientY);
                if(navigator.vibrate) navigator.vibrate(10);
            }
        });

        function createParticle(x, y) {
            const p = document.createElement('div');
            p.className = 'plus-one'; p.innerText = '+' + pwr;
            p.style.left = x + 'px'; p.style.top = y + 'px';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 600);
        }

        function toggle(id, show) {
            document.getElementById(id).classList.toggle('open', show);
        }

        function toggleAll(show) {
            toggle('shop', false); toggle('invest', false);
        }

        function upgrade() {
            if (bal >= 1000) {
                bal -= 1000; pwr += 1;
                localStorage.setItem('v_bal', bal); localStorage.setItem('v_pwr', pwr);
                sync(); alert('–ü–∞–∫–µ—Ç —É—Å–ª—É–≥ –æ–±–Ω–æ–≤–ª–µ–Ω!');
            } else { alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤'); }
            }

        setInterval(() => { if(nrg < 1000) { nrg += 2; sync(); } }, 1000);
        sync();
    </script>
</body>
</html>
